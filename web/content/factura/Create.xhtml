<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/index.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.MessageCreateOrdenPedido}"/>
        </ui:define>
        <ui:define name="body">

            <h:form id="VisitaCreateForm">
                <h:panelGroup id="display" >
                    <p:panel header="Datos Factura">
                        <p:panelGrid columns="6" >
                            <p:outputLabel value="#{bundle.CreateVisitaLabel_fecha}" for="fecha"/>
                            <p:calendar mindate="#{visitaController.fechaActual}" id="fecha" pattern="MM/dd/yyyy HH:mm:ss"
                                        value="#{visitaController.selected.fecha}" title="#{bundle.EditVisitaTitle_fecha}"
                                        required="true" requiredMessage="#{bundle.EditVisitaRequiredMessage_fecha}" showOn="button"/>
                            <p:outputLabel value="#{bundle.CreateCodigoDevolucionLabel_codigo}" for="codigo"/>
                            <p:inputText id="codigo" value="#{facturaController.selected.ordenPedido}"/>
                            <p:outputLabel value="#{bundle.MeesageCreateTipoPago}" for="tipo_pago" />
                            <p:selectOneMenu id="tipo_pago" value="#{null}" required="true" requiredMessage="#{bundle.CreateVisitaRequiredMessage_estado}">
                                <f:selectItems value="#{facturaController.tiposEstado}" />
                            </p:selectOneMenu>
                            <p:outputLabel value="#{bundle.CreateVisitaLabel_cliente}" for="cliente"/>
                            <p:selectOneMenu id="cliente" value="#{null}" required="true" 
                                             requiredMessage="#{bundle.EditVisitaRequiredMessage_empleado}">
                                <f:selectItems value="#{clienteController.itemsAvailableSelectOne}"
                                               var="clienteItem"
                                               itemValue="#{clienteItem}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="#{bundle.CreateVisitaLabel_empleado}" for="empleado" />
                            <p:selectOneMenu id="empleado" value="#{null}" required="true" requiredMessage="#{bundle.EditVisitaRequiredMessage_empleado}">
                                <f:selectItems value="#{empleadoController.itemsAvailableSelectOne}"
                                               var="empleadoItem"
                                               itemValue="#{empleadoItem}"/>
                            </p:selectOneMenu><h:outputText/><h:outputText/>

                            <p:outputLabel value="#{bundle.CreateDevolucionLabel_observaciones}" for="observaciones"/>
                            <p:inputTextarea id="observaciones" value="#{facturaController.selected.observaciones}"/>

                        </p:panelGrid>
                    </p:panel>
                    <br/>
                    <p:panel header="Agregar Productos">
                        <p:panelGrid columns="8">
                            <p:outputLabel value="#{bundle.CreateFacturaProductoLabel_producto}" for="producto"/>
                            <p:selectOneMenu id="producto" value="#{null}">
                                <f:selectItem  itemLabel="#{bundle.SelectOneMessage}"/>
                                <f:selectItems value="#{productoController.itemsAvailableSelectOne}" var="productoItem" itemValue="#{productoItem}"/>
                            </p:selectOneMenu>

                            <p:outputLabel value="#{bundle.MessageCreateVenta}" for="venta"/>
                            <p:spinner min="0" value="#{facturaProductoController.selected.unidadesVenta}" id="venta"/>

                            <p:outputLabel value="#{bundle.MessageCreateBonificacion}" for="bonificacion"/>
                            <p:spinner min="0" value="#{facturaProductoController.selected.unidadesBonificacion}" id="bonificacion"/>

                            <p:outputLabel value="#{bundle.MessageCreatePrecio}" for="precio"/>
                            <p:inputText value="#{facturaProductoController.selected.precio}" id="precio"/>

                            <p:commandButton icon="ui-icon-plus" value="#{bundle.AddItem}"/>

                        </p:panelGrid>
                    </p:panel>
                    <p:panel>
                        <p:dataTable styleClass="tabla" emptyMessage="#{bundle.EmptyTable}" id="listaProductos" var="itemTMP"
                                     paginator="true" selectionMode="single"
                                     rowKey="#{itemTMP.id}"
                                     rows="5"
                                     rowsPerPageTemplate="10,20,30,40,50"
                                     paginatorPosition="bottom"> 
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListProductoTitle}"/>
                            </f:facet>
                            <p:column>
                                <f:facet name="header">
                                    Código
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    Descripción
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    Venta
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    Bonificación
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    Precio
                                </f:facet>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                    <p:commandButton actionListener="#{visitaController.create}" value="#{bundle.Save}"
                                     icon="ui-icon-disk"/>
                </h:panelGroup>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
